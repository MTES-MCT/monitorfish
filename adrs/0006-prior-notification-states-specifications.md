# Spécifications métier et aractéristiques techniques des statuts de diffusion des préavis

Date: 2024-07-30

## Statut

Résolu

## Contexte

_À rédiger._

## Décision

_À rédiger._

## Conséquences

| is_manual | is_in_verification_scope | is_verified | is_sent | is_being_sent | État    | Situation correspondante                                                                                                                                                                                                                                                                                                                                                   | Statut affiché                       | Statut                      |
| --------- | ------------------------ | ----------- | ------- | ------------- | ------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------ | --------------------------- |
| `FALSE`   | `FALSE`                  | `FALSE`     | `FALSE` | `FALSE`       | `00000` | Le préavis auto ne fait pas partie du périmètre de vérification du CNSP et n'a pas été diffusé car aucune unité n'a des paramètres de diffusion qui correspondent à ce préavis.<br /><br />**FORMULAIRE**<br />Le préavis auto ne fait pas partie du périmètre de vérification du CNSP et aucune unité n'a des paramètres de diffusion qui correspondent à ce préavis.     | <nobr>"Hors vérification"</nobr>     | `OUT_OF_VERIFICATION_SCOPE` |
| `FALSE`   | `FALSE`                  | `FALSE`     | `FALSE` | `FALSE`       | `00000` | **FORMULAIRE**<br />Le préavis auto ne fait pas partie du périmètre de vérification du CNSP et au moins une unité a des paramètres de diffusion qui correspondent à ce préavis.                                                                                                                                                                                            | <nobr>"Envoi auto. demandé"</nobr>   | `AUTO_SEND_REQUESTED`       |
| `FALSE`   | `FALSE`                  | `FALSE`     | `FALSE` | `TRUE`        | `00001` | Le préavis auto ne fait pas partie du périmètre de vérification du CNSP et est en cours de recherche d'unités dont les paramètres de diffusion correspondent à ce préavis.                                                                                                                                                                                                 | <nobr>"En cours d'envoi auto"</nobr> | `AUTO_SEND_IN_PROGRESS`     |
| `FALSE`   | `FALSE`                  | `FALSE`     | `TRUE`  | `FALSE`       | `00010` | Le préavis auto ne fait pas partie du périmètre de vérification du CNSP et a été diffusé auprès des unités dont les paramètres de diffusion correspondent à ce préavis.                                                                                                                                                                                                    | <nobr>"Envoi auto. fait"</nobr>      | `AUTO_SEND_DONE`            |
| `FALSE`   | `FALSE`                  | `FALSE`     | `TRUE`  | `TRUE`        | `00011` | Impossible : on ne peut avoir un préavis à la fois diffusé et en cours de diffusion.                                                                                                                                                                                                                                                                                       |                                      |                             |
| `FALSE`   | `FALSE`                  | `TRUE`      | `FALSE` | `FALSE`       | `00100` | Le préavis a été vérifié / diffusé mais la diffusion n'a pas abouti à un envoi effectif. Causes possibles : pas d'unité abonnée au port, unités abonnées mais sans adresse de diffusion email ni sms, ou tous les envois ont échoué                                                                                                                                        | <nobr>"Échec de diffusion"</nobr>    | `FAILED_SEND`               |
| `FALSE`   | `FALSE`                  | `TRUE`      | `FALSE` | `TRUE`        | `00101` | L'utilisateur a vérifié et diffusé le préavis auto (bien que hors scope), la pipeline n'a pas encore fait l'envoi.                                                                                                                                                                                                                                                         | <nobr>"En cours de diffusion"</nobr> | `PENDING_SEND`              |
| `FALSE`   | `FALSE`                  | `TRUE`      | `TRUE`  | `FALSE`       | `00110` | Le préavis auto a été vérifié et diffusé, bien que ne faisant pas partie du périmère de vérification du CNSP.                                                                                                                                                                                                                                                              | <nobr>"Vérifié et diffusé"</nobr>    | `VERIFIED_AND_SENT`         |
| `FALSE`   | `FALSE`                  | `TRUE`      | `TRUE`  | `TRUE`        | `00111` | Impossible : on ne peut avoir un préavis à la fois diffusé et en cours de diffusion.                                                                                                                                                                                                                                                                                       |                                      |                             |
| `FALSE`   | `TRUE`                   | `FALSE`     | `FALSE` | `FALSE`       | `01000` | Le préavis auto est à vérifier et diffuser.                                                                                                                                                                                                                                                                                                                                | <nobr>"À vérifier"</nobr>            | `PENDING_VERIFICATION`      |
| `FALSE`   | `TRUE`                   | `FALSE`     | `FALSE` | `TRUE`        | `01001` | Impossible : un préavis faisant partie du périmètre de vérification du CNSP ne peut pas être envoyé sans avoir été vérifié.                                                                                                                                                                                                                                                |                                      |                             |
| `FALSE`   | `TRUE`                   | `FALSE`     | `TRUE`  | `FALSE`       | `01010` | Impossible : un préavis faisant partie du périmètre de vérification du CNSP ne peut pas être envoyé sans avoir été vérifié.                                                                                                                                                                                                                                                |                                      |                             |
| `FALSE`   | `TRUE`                   | `FALSE`     | `TRUE`  | `TRUE`        | `01011` | Impossible : on ne peut avoir un préavis à la fois diffusé et en cours de diffusion. Et il ne peut pas être envoyé sans avoir été vérifié.                                                                                                                                                                                                                                 |                                      |                             |
| `FALSE`   | `TRUE`                   | `TRUE`      | `FALSE` | `FALSE`       | `01100` | Le préavis a été vérifié / diffusé mais la diffusion n'a pas abouti à un envoi effectif. Causes possibles : pas d'unité abonnée au port, unités abonnées mais sans adresse de diffusion email ni sms, ou tous les envois ont échoué                                                                                                                                        | <nobr>"Échec de diffusion"</nobr>    | `FAILED_SEND`               |
| `FALSE`   | `TRUE`                   | `TRUE`      | `FALSE` | `TRUE`        | `01101` | L'utilisateur a vérifié et diffusé le préavis auto, la pipeline n'a pas encore fait l'envoi.                                                                                                                                                                                                                                                                               | <nobr>"En cours de diffusion"</nobr> | `PENDING_SEND`              |
| `FALSE`   | `TRUE`                   | `TRUE`      | `TRUE`  | `FALSE`       | `01110` | Le préavis auto a été vérifié et diffusé.                                                                                                                                                                                                                                                                                                                                  | <nobr>"Vérifié et diffusé"</nobr>    | `VERIFIED_AND_SENT`         |
| `FALSE`   | `TRUE`                   | `TRUE`      | `TRUE`  | `TRUE`        | `01111` | Impossible : on ne peut avoir un préavis à la fois diffusé et en cours de diffusion.                                                                                                                                                                                                                                                                                       |                                      |                             |
| `TRUE`    | `FALSE`                  | `FALSE`     | `FALSE` | `FALSE`       | `10000` | Le préavis manuel ne fait pas partie du périmètre de vérification du CNSP et n'a pas été diffusé car aucune unité n'a des paramètres de diffusion qui correspondent à ce préavis.<br /><br />**FORMULAIRE**<br />Le préavis manuel ne fait pas partie du périmètre de vérification du CNSP et aucune unité n'a des paramètres de diffusion qui correspondent à ce préavis. | <nobr>"Hors vérification"</nobr>     | `OUT_OF_VERIFICATION_SCOPE` |
| `TRUE`    | `FALSE`                  | `FALSE`     | `FALSE` | `FALSE`       | `10000` | **FORMULAIRE**<br />Le préavis manuel ne fait pas partie du périmètre de vérification du CNSP et au moins une unité a des paramètres de diffusion qui correspondent à ce préavis.                                                                                                                                                                                          | <nobr>"Envoi auto. demandé"</nobr>   | `AUTO_SEND_REQUESTED`       |
| `TRUE`    | `FALSE`                  | `FALSE`     | `FALSE` | `TRUE`        | `10001` | Le préavis manuel ne fait pas partie du périmètre de vérification du CNSP et est en cours de recherche d'unités dont les paramètres de diffusion correspondent à ce préavis.                                                                                                                                                                                               | <nobr>"En cours d'envoi auto"</nobr> | `AUTO_SEND_IN_PROGRESS`     |
| `TRUE`    | `FALSE`                  | `FALSE`     | `TRUE`  | `FALSE`       | `10010` | Le préavis manuel ne fait pas partie du périmètre de vérification du CNSP et a été diffusé auprès des unités dont les paramètres de diffusion correspondent à ce préavis.                                                                                                                                                                                                  | <nobr>"Envoi auto. fait"</nobr>      | `AUTO_SEND_DONE`            |
| `TRUE`    | `FALSE`                  | `FALSE`     | `TRUE`  | `TRUE`        | `10011` | Impossible : on ne peut avoir un préavis à la fois diffusé et en cours de diffusion.                                                                                                                                                                                                                                                                                       |                                      |                             |
| `TRUE`    | `FALSE`                  | `TRUE`      | `FALSE` | `FALSE`       | `10100` | Le préavis a été vérifié / diffusé mais la diffusion n'a pas abouti à un envoi effectif. Causes possibles : pas d'unité abonnée au port, unités abonnées mais sans adresse de diffusion email ni sms, ou tous les envois ont échoué                                                                                                                                        | <nobr>"Échec de diffusion"</nobr>    | `FAILED_SEND`               |
| `TRUE`    | `FALSE`                  | `TRUE`      | `FALSE` | `TRUE`        | `10101` | Le préavis manuel a été vérifié et diffusé, bien que ne faisant pas partie du périmère de vérification du CNSP. La pipeline n'a pas encore fait l'envoi.                                                                                                                                                                                                                   | <nobr>"En cours de diffusion"</nobr> | `PENDING_SEND`              |
| `TRUE`    | `FALSE`                  | `TRUE`      | `TRUE`  | `FALSE`       | `10110` | Le préavis manuel a été vérifié et diffusé, bien que ne faisant pas partie du périmère de vérification du CNSP.                                                                                                                                                                                                                                                            | <nobr>"Vérifié et diffusé"</nobr>    | `VERIFIED_AND_SENT`         |
| `TRUE`    | `FALSE`                  | `TRUE`      | `TRUE`  | `TRUE`        | `10111` | Impossible : on ne peut avoir un préavis à la fois diffusé et en cours de diffusion.                                                                                                                                                                                                                                                                                       |                                      |                             |
| `TRUE`    | `TRUE`                   | `FALSE`     | `FALSE` | `FALSE`       | `11000` | Le préavis manuel est à vérifier et diffuser.                                                                                                                                                                                                                                                                                                                              | <nobr>"À vérifier"</nobr>            | `PENDING_VERIFICATION`      |
| `TRUE`    | `TRUE`                   | `FALSE`     | `FALSE` | `TRUE`        | `11001` | Impossible : un préavis faisant partie du périmètre de vérification du CNSP ne peut pas être envoyé sans avoir été vérifié.                                                                                                                                                                                                                                                |                                      |                             |
| `TRUE`    | `TRUE`                   | `FALSE`     | `TRUE`  | `FALSE`       | `11010` | Impossible : un préavis faisant partie du périmètre de vérification du CNSP ne peut pas être envoyé sans avoir été vérifié.                                                                                                                                                                                                                                                |                                      |                             |
| `TRUE`    | `TRUE`                   | `FALSE`     | `TRUE`  | `TRUE`        | `11011` | Impossible : on ne peut avoir un préavis à la fois diffusé et en cours de diffusion.                                                                                                                                                                                                                                                                                       |                                      |                             |
| `TRUE`    | `TRUE`                   | `TRUE`      | `FALSE` | `FALSE`       | `11100` | Le préavis a été vérifié / diffusé mais la diffusion n'a pas abouti à un envoi effectif. Causes possibles : pas d'unité abonnée au port, unités abonnées mais sans adresse de diffusion email ni sms, ou tous les envois ont échoué                                                                                                                                        | <nobr>"Échec de diffusion"</nobr>    | `FAILED_SEND`               |
| `TRUE`    | `TRUE`                   | `TRUE`      | `FALSE` | `TRUE`        | `11101` | L'utilisateur a vérifié/diffusé le préavis manuel, la pipeline n'a pas encore fait l'envoi.                                                                                                                                                                                                                                                                                | <nobr>"En cours de diffusion"</nobr> | `PENDING_SEND`              |
| `TRUE`    | `TRUE`                   | `TRUE`      | `TRUE`  | `FALSE`       | `11110` | Le préavis manuel a été vérifié et diffusé.                                                                                                                                                                                                                                                                                                                                | <nobr>"Vérifié et diffusé"</nobr>    | `VERIFIED_AND_SENT`         |
| `TRUE`    | `TRUE`                   | `TRUE`      | `TRUE`  | `TRUE`        | `11111` | Impossible : on ne peut avoir un préavis à la fois diffusé et en cours de diffusion.                                                                                                                                                                                                                                                                                       |                                      |                             |
