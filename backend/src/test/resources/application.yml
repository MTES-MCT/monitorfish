server:
  port: 8080
  use-forward-headers: true
  forward-headers-strategy: framework
  compression:
    enabled: true
    excluded-user-agents: ""
    mime-types: text/html,text/xml,text/plain,text/css,text/javascript,application/javascript
    min-response-size: 2048

host:
  ip: localhost

monitorfish:
  ajp:
    port: 8000
  database:
    missionsActionsChunkSize: 100
  api:
    protected:
      paths: /bff/*
      # Super-user paths of type /** are not supported
      super-user-paths: /bff/v1/beacon_malfunctions,/bff/v1/missions,/bff/v1/operational_alerts,/bff/v1/reportings,/bff/v1/vessels/risk_factors
      public-paths: /api/v1/authorization/management/*,/api/v1/beacon_malfunctions/*
      api-key: DUMMY-API-KEY
  oidc:
    enabled: false
  scheduling:
    enabled: false
  sentry:
    enabled: false
    dsn:
  keycloak:
    proxy:
      enabled: false

logging:
  level:
    org.springframework.security.web.authentication.logout: DEBUG
    org.hybernate.SQL: DEBUG
    org.hybernate.type.descriptor.sql.BasicBinder: TRACE

spring:
  jmx:
    enabled: false
  mvc:
    static-path-pattern: "/**"
  resources:
    static-locations: file:/tmp/static
  jpa:
    hibernate:
      ddl-auto: validate
    properties:
      jakarta:
        persistence:
            query:
                timeout: 10000
      hibernate:
        temp:
          use_jdbc_metadata_defaults: false
        jdbc:
          lob:
            non_contextual_creation: true
          time_zone: UTC
        dialect: org.hibernate.dialect.PostgreSQLDialect
        format_sql: true
        type:
          preferred_uuid_jdbc_type: CHAR
    show-sql: true
  flyway:
    enabled: true
    locations: classpath:/db/migration,classpath:/db/testdata
  datasource:
    url: jdbc:tc:postgresql:9.6.8://localhost/testdb
    username: user
    password: pass
    driver-class-name: org.postgresql.Driver
    validation-query: select 1
    test-on-borrow: true
    hikari:
      maxLifetime: 60000
      maximum-pool-size: 30
  servlet:
    multipart:
      max-file-size: 5MB

management:
  endpoint:
    health:
      show-details: always
    metrics:
      enable: false
  endpoints:
    web:
      exposure:
        include: "*"

monitorenv:
  url: http://localhost:8081

log4j2:
  script:
    enableLanguages: javascript

springdoc:
  packagesToScan: fr.gouv.cnsp.monitorfish
