

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Contributing &mdash; Monitorfish  documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="API reference" href="reference.html" />
    <link rel="prev" title="Deployment" href="deployment.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> Monitorfish
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="feature-presentation.html">Feature presentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">Architecture</a></li>
<li class="toctree-l1"><a class="reference internal" href="data-sources.html">External data sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="flows.html">Flows</a></li>
<li class="toctree-l1"><a class="reference internal" href="containerization.html">Containerization</a></li>
<li class="toctree-l1"><a class="reference internal" href="deployment.html">Deployment</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Contributing</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#joining-the-project-team">Joining the project team</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#communication">Communication</a></li>
<li class="toctree-l3"><a class="reference internal" href="#project-management">Project management</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#front-end-and-back-end-development">Front end and back end development</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#install">Install</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run">Run</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test">Test</a></li>
<li class="toctree-l3"><a class="reference internal" href="#documentation">Documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#problems-solutions">Problems &amp; solutions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#windows-docker">Windows &amp; Docker</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#data-pipeline-development-and-data-science">Data pipeline development and data science</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-and-data-sources">Data and data sources</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-install">Install</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">Test</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id3">Documentation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="reference.html">API reference</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Monitorfish</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Contributing</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/contributing.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="contributing">
<h1>Contributing<a class="headerlink" href="#contributing" title="Permalink to this headline">¶</a></h1>
<p>This guide explains how to contribute to the project.</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#joining-the-project-team" id="id4">Joining the project team</a></p></li>
<li><p><a class="reference internal" href="#front-end-and-back-end-development" id="id5">Front end and back end development</a></p></li>
<li><p><a class="reference internal" href="#data-pipeline-development-and-data-science" id="id6">Data pipeline development and data science</a></p></li>
<li><p><a class="reference internal" href="#id3" id="id7">Documentation</a></p></li>
</ul>
</div>
<hr class="docutils" />
<div class="section" id="joining-the-project-team">
<h2><a class="toc-backref" href="#id4">Joining the project team</a><a class="headerlink" href="#joining-the-project-team" title="Permalink to this headline">¶</a></h2>
<div class="section" id="communication">
<h3>Communication<a class="headerlink" href="#communication" title="Permalink to this headline">¶</a></h3>
<p>Communication within the team is done on :</p>
<ul class="simple">
<li><p>a Slack workspace</p></li>
<li><p>daily standup meetings</p></li>
</ul>
<p>The first thing to do when joining the project is to <a class="reference external" href="mailto:vincent&#46;chery&#37;&#52;&#48;m4x&#46;org">get in touch</a> so we help you join these spaces.</p>
</div>
<div class="section" id="project-management">
<h3>Project management<a class="headerlink" href="#project-management" title="Permalink to this headline">¶</a></h3>
<p>We use :</p>
<ul class="simple">
<li><p>a board with the <a class="reference external" href="https://github.com/MTES-MCT/monitorfish/projects/3">roadmap of the project</a></p></li>
<li><p>a more detailed <a class="reference external" href="https://github.com/MTES-MCT/monitorfish/projects/1">board of the tasks</a> (issues)</p></li>
<li><p>work on issues is always done on feature branches which are merged into <code class="docutils literal notranslate"><span class="pre">master</span></code> after review</p></li>
</ul>
</div>
</div>
<hr class="docutils" />
<div class="section" id="front-end-and-back-end-development">
<h2><a class="toc-backref" href="#id5">Front end and back end development</a><a class="headerlink" href="#front-end-and-back-end-development" title="Permalink to this headline">¶</a></h2>
<div class="section" id="install">
<h3>Install<a class="headerlink" href="#install" title="Permalink to this headline">¶</a></h3>
<p>To install front end dependencies, execute:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>make install
</pre></div>
</div>
</div>
<div class="section" id="run">
<h3>Run<a class="headerlink" href="#run" title="Permalink to this headline">¶</a></h3>
<p>To run the frontend for development purposes, open a terminal and execute:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>make run-front
</pre></div>
</div>
<p>To run the backend for development purpose (with hot-reload), open another terminal and execute:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>make run-back
</pre></div>
</div>
<ul class="simple">
<li><p>During the first run, dependencies will be downloaded</p></li>
<li><p>You’ll need to install <cite>psql</cite> to interact with the Postgres database</p></li>
</ul>
<p>Then, insert the GIS layers to the postgres database by executing (make sure you have <cite>psql</cite> installed):</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./infra/remote/postgis_insert_layers.sh
</pre></div>
</div>
<p>Export the required environment variables:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">DB_HOST</span><span class="o">=</span>db
<span class="nb">export</span> <span class="nv">DB_NAME</span><span class="o">=</span>monitorfishdb
<span class="nb">export</span> <span class="nv">DB_SCHEMA</span><span class="o">=</span>public
<span class="nb">export</span> <span class="nv">DB_USER</span><span class="o">=</span>postgres
<span class="nb">export</span> <span class="nv">DB_PASSWORD</span><span class="o">=</span>postgres
</pre></div>
</div>
<p>Finally add to Geoserver the layers by executing (make sure to remove your proxy if you have one configured with <cite>unset HTTP_PROXY</cite> and <cite>unset http_proxy</cite>):</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>./infra/init/geoserver_init_layers.sh
</pre></div>
</div>
</div>
<div class="section" id="test">
<h3>Test<a class="headerlink" href="#test" title="Permalink to this headline">¶</a></h3>
<p>To run all tests and checks clean architecture principles are respected, execute:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>make <span class="nb">test</span>
</pre></div>
</div>
<p>To manually add a VMS position (in NAF format) for the vessel <cite>CABO ARTA</cite>:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl --data <span class="s1">&#39;//SR//AD/FRA//FR/NLD//RD/20210431//NA/CABO ARTA//RT/2133//FS/NLD//RC/PCVC//XR/FG78//IR/XXX2545115//DA/20210431//TI/2130//LT/55.099//LG/3.869//SP/0//CO/173//TM/POS//ER//&#39;</span>  -X POST http://localhost:8880/api/v1/positions -H <span class="s2">&quot;Content-Type:application/text&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="documentation">
<h3>Documentation<a class="headerlink" href="#documentation" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>API documentation can be found at <a class="reference external" href="http://localhost:8880/swagger-ui.html">http://localhost:8880/swagger-ui.html</a></p></li>
<li><p>Frontend documentation can be generated with</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>jsdoc frontend/src/domain/ frontend/src/types/ frontend/src/api/ -r -P frontend/ -d docs
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="problems-solutions">
<h3>Problems &amp; solutions<a class="headerlink" href="#problems-solutions" title="Permalink to this headline">¶</a></h3>
<div class="section" id="windows-docker">
<h4>Windows &amp; Docker<a class="headerlink" href="#windows-docker" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p><em>During the build, there is an error while seting up docker which is used for the test database</em></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Explanation</strong> : Testing uses docker. To be able to connect to docker, Intellij requires that TLS is disabled in docker.</p></li>
<li><p><strong>Solution</strong> : Open docker Configuration, General and click on “Expose Daemon on xxxx Witout TLS”</p></li>
</ul>
</div></blockquote>
</li>
<li><p><em>Running the application with IntelliJ does not work. Spring complains about a BuildProperties beans that is missing</em></p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Explanation</strong>: The buildProperties bean is constructed based on the META-INF/build-info.properties file. This file is generated by Maven, but not by IntelliJ</p></li>
<li><p><strong>Solution</strong>: Tell IntelliJ to delegate the build to maven. To do this you must:</p></li>
</ul>
<ol class="arabic simple">
<li><p>go to Build,Execution,Deployment&gt; Build Tools &gt; Maven &gt; Runner</p></li>
<li><p>click the checkbox : “Delegate IDE Build/run actions to maven”</p></li>
</ol>
</div></blockquote>
</li>
</ul>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="data-pipeline-development-and-data-science">
<h2><a class="toc-backref" href="#id6">Data pipeline development and data science</a><a class="headerlink" href="#data-pipeline-development-and-data-science" title="Permalink to this headline">¶</a></h2>
<p>Data processing and ETL operations are done in python using <a class="reference external" href="https://docs.prefect.io/core/">prefect</a> and <a class="reference external" href="https://pandas.pydata.org/">pandas</a>.</p>
<div class="section" id="data-and-data-sources">
<h3>Data and data sources<a class="headerlink" href="#data-and-data-sources" title="Permalink to this headline">¶</a></h3>
<p>Data is not open and can only be accessed from inside the RIE network. To work with data, you will need to either access the private development server or work with data extracts.</p>
</div>
<div class="section" id="data-install">
<span id="id1"></span><h3>Install<a class="headerlink" href="#data-install" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>The project runs on <strong>python 3.8.7</strong>. To manage python versions, we suggest you use <a class="reference external" href="https://github.com/pyenv/pyenv">pyenv</a>. See the official documentation for installation instructions.</p></li>
<li><p>After installing python 3.8.7, install development dependencies :</p>
<ul>
<li><p>If you do not have <code class="docutils literal notranslate"><span class="pre">poetry</span></code>, install it to manage python dependencies:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>curl -sSL https://raw.githubusercontent.com/python-poetry/poetry/master/get-poetry.py <span class="p">|</span> python3 -
</pre></div>
</div>
</li>
<li><p>Within the <cite>datascience</cite> folder, install python dependencies :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>poetry install
</pre></div>
</div>
</li>
</ul>
</li>
<li><p>To install pre-commit hooks (isort, black and flake8 are configured in the pyproject.toml), run</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>poetry run pre-commit install
</pre></div>
</div>
</li>
</ul>
</div>
<div class="section" id="id2">
<h3>Test<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h3>
<p>To run tests on the data pipeline, run</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>make test-data-pipeline
</pre></div>
</div>
</div>
</div>
<hr class="docutils" />
<div class="section" id="id3">
<h2><a class="toc-backref" href="#id7">Documentation</a><a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h2>
<p>Documentation is written as <code class="docutils literal notranslate"><span class="pre">.rst</span></code> source files, from which the documentation (this website) is built using <a class="reference external" href="https://www.sphinx-doc.org/en/master/">sphinx</a> and hosted on Github pages.</p>
<p><code class="docutils literal notranslate"><span class="pre">.rst</span></code> sources are in <code class="docutils literal notranslate"><span class="pre">datascience/docs/source</span></code>.</p>
<ul>
<li><p>To build the documentation locally, you need to install the python development dependencies as described in <a class="reference internal" href="#data-install"><span class="std std-ref">Install</span></a></p></li>
<li><p>To build the html documentation locally, run :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>make update-sphinx-docs
</pre></div>
</div>
<p>This builds the documentation in <code class="docutils literal notranslate"><span class="pre">datascience/docs</span></code> and moves the built html to <code class="docutils literal notranslate"><span class="pre">/docs</span></code>. You can then view the documentation by opening <code class="docutils literal notranslate"><span class="pre">/docs/index.html</span></code> in a web browser.</p>
</li>
<li><p>To build a pdf version of the documentation, the following dependencies are required :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>sudo apt-get update
sudo apt-get install texlive-latex-recommended texlive-fonts-recommended tex-gyre texlive-latex-extra latexmk
</pre></div>
</div>
</li>
<li><p>To build the pdf documentation, from <code class="docutils literal notranslate"><span class="pre">/datascience/docs</span></code>, run :</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>make latexpdf
</pre></div>
</div>
</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="reference.html" class="btn btn-neutral float-right" title="API reference" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="deployment.html" class="btn btn-neutral float-left" title="Deployment" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, Vincent Chéry.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>